<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live TV Player (T-Sports Demo)</title>
    
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> 
    
    <style>
        body { font-family: sans-serif; text-align: center; background-color: #2c3e50; color: #ecf0f1; margin: 0; padding: 20px; }
        h1 { color: #2ecc71; }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; background-color: #34495e; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
        #videoPlayer { width: 100%; height: auto; background-color: black; border-radius: 8px; margin-bottom: 15px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background-color: #e74c3c; color: white; border: none; border-radius: 5px; transition: background-color 0.3s; }
        button:hover { background-color: #c0392b; }
        .info { margin-top: 15px; font-size: 1.1em; }
        .info.loading { color: #f39c12; }
        .info.success { color: #2ecc71; }
        .info.error { color: #e74c3c; }
    </style>
</head>
<body>

    <div class="container">
        <h1>T-Sports Live TV (‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∏‡¶ø ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®)</h1>
        
        <video id="videoPlayer" controls autoplay></video> 
        
        <button id="playButton" onclick="loadStream()">üì∫ T-Sports TV ‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡ßÅ‡¶®</button>

        <p id="status_message" class="info loading">‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø '‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡ßÅ‡¶®' ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
    </div>

    <script>
        const PROXY_URL = "http://localhost:3000/live-tv-proxy"; 
        
        const video = document.getElementById('videoPlayer');
        const statusMessage = document.getElementById('status_message');
        const playButton = document.getElementById('playButton');
        
        // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≤‡ßã‡¶°‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶á ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶æ (Autoplay)
        window.onload = loadStream; 

        function setStatus(text, className) {
            statusMessage.textContent = text;
            statusMessage.className = `info ${className}`;
        }

        function loadStream() {
            setStatus('‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá... ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∏‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá‡•§', 'loading');
            playButton.disabled = true; 
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶ó‡ßá ‡¶ï‡ßã‡¶®‡ßã Hls ‡¶á‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶∏ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶¨‡ßá ‡¶§‡¶æ ‡¶®‡¶∑‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ 
            if (window.hls) {
                window.hls.destroy();
            }

            if (Hls.isSupported()) {
                const hls = new Hls({
                    // ‡¶ï‡¶Æ ‡¶≤‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶®‡ßç‡¶∏‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®
                    liveSyncDurationCount: 3, 
                    liveMaxLatencyDurationCount: 5,
                });
                window.hls = hls;
                
                hls.loadSource(PROXY_URL);
                hls.attachMedia(video);
                
                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                    video.play()
                        .then(() => {
                            setStatus('‚úÖ T-Sports TV ‡¶ö‡¶≤‡¶õ‡ßá‡•§', 'success');
                        })
                        .catch(error => {
                            // ‡¶™‡ßç‡¶≤‡ßá‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶æ ‡¶™‡¶æ‡¶∞‡¶≤‡ßá (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ Autoplay ‡¶™‡¶≤‡¶ø‡¶∏‡¶ø)
                            setStatus('‚ö†Ô∏è ‡¶Ö‡¶ü‡ßã‡¶™‡ßç‡¶≤‡ßá ‡¶¨‡ßç‡¶≤‡¶ï ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶¨‡¶æ‡¶ü‡¶®‡¶ü‡¶ø‡¶§‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'error');
                            playButton.disabled = false; 
                        });
                });
                
                hls.on(Hls.Events.ERROR, function (event, data) {
                    if (data.fatal) {
                        hls.destroy();
                        setStatus(`‚ùå ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§ ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∏‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶¨‡¶æ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Æ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`, 'error');
                        console.error('HLS Fatal Error:', data.details, data.response ? data.response.code : '');
                        playButton.disabled = false;
                    }
                });

            } else {
                // Safari ‡¶¨‡¶æ iOS-‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡ßá‡¶ü‡¶ø‡¶≠ HLS ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ 
                video.src = PROXY_URL;
                video.addEventListener('loadedmetadata', function() {
                    video.play();
                    setStatus('‚úÖ T-Sports TV ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá (Native Support)‡•§', 'success');
                });
                video.addEventListener('error', function() {
                     setStatus('‚ùå ‡¶®‡ßá‡¶ü‡¶ø‡¶≠ ‡¶™‡ßç‡¶≤‡ßá‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡•§ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Æ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï‡¶ü‡¶ø ‡¶π‡¶Ø‡¶º‡¶§‡ßã ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶õ‡ßá ‡¶®‡¶æ‡•§', 'error');
                     playButton.disabled = false;
                });
            }
        }
    </script>
</body>
</html>